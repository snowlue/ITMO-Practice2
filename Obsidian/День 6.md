Доработали ноду с алгоритмом [[ICP]]. Основной задачей было конвертировать облако точек `PointCloud` от лидара в `OccupancyGrid` для публикации карты. Основные заметки:
- **Разрешение**: 0.05 м/пиксель
- **Размер**: 20x20 метров (-10 до +10 по обеим осям)
- **Ray-tracing**: алгоритм Брезенхема для отметки свободного пространства
- **Значения**: -1 (неизвестно), 0 (свободно), 100 (препятствие)

При реализации столкнулись с несколькими проблемами:
- **Проблема**: Сначала карта строилась нормально, но после поворота робота облако точек съезжало и соответственно карта строилась неправильно. 
	**Решение**:
	- Создание изолированных объектов OccupancyGrid для каждой публикации
	- Ограничение вычислительной нагрузки (макс. 1000 точек)
- **Проблема**: Потеря свободного пространства при перестроении карты. Это происходило потому, что в каждой итерации карта создавалась заново.
	**Решение**:
	- Введение постоянной карты состояний `self.persistent_map_data`
	- Накопительное обновление только новых областей

![[Снимок экрана_20250623_150105.png]]
Далее подобрали оптимальные параметры для построения карты и отладили код.
Итоговый результат работы:
![[Снимок экрана_20250623_145732.png]]![[Снимок экрана_20250623_163523.png]]

---

Показали преподавателю [[AMCL]] с визуализацией в `matplotlib` и обсудили его работу. Для этого из [[ICP]] необходимо получать карту `/map` (binary occupancy grid) с трассировкой лучей по алгоритму Брезенхема и одометрию `/odom` с корректировкой ICP. Карта будет использоваться в `measurement_model`, а одометрия — в `motion_model`.

---
Начали работу с realsense камерой. Установили необходимые зависимости для работы:
```bash
sudo apt-get install ros-jazzy-realsense2-camera ros-jazzy-realsense2-description
```

Команда для запуска ноды камеры:
```bash
ros2 launch realsense2_camera rs_launch.py pointcloud.enable:=true align_depth.enable:=true
```

Описание работы [[ORB SLAM]].
